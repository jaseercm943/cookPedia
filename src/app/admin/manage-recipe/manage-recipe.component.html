<div class="row w-100 mb-2">
    <div class="col-md-2">
        <app-sidebar></app-sidebar>
    </div>
    <div class="col-md-10">
        <div class="p-5">
            @if(id){
            <h1 class="text-center fw-bold mb-3 text-danger">Update Recipe Details</h1>
            }
            @else {
            <h1 class="text-center fw-bold mb-3 text-danger">Add Recipe Details</h1>
            }

            <div class="shadow-lg p-4">
                <div class="d-flex justify-content-center align-items-center">
                    @if (recipeDetails.image) {
                    <img [src]="recipeDetails.image" alt="image" height="250" width="250" />
                    }
                </div>
                <form action="" class="">
                    <div class="row w-100 gap-2 justify-content-center p-3">
                        <input class="col-md-5 p-2 input" type="text" placeholder="Recipe name"
                            [(ngModel)]="recipeDetails.name" name="name" />
                        <input class="col-md-5 p-2 input" type="text" placeholder="Recipe Cooking time in Minutes"
                            [(ngModel)]="recipeDetails.cookTimeMinutes" name="cooktime" />
                        <input class="col-md-5 p-2 input" type="text" placeholder="Recipe Preparation time in Minutes"
                            [(ngModel)]="recipeDetails.prepTimeMinutes" name="prepTime" />
                        <input class="col-md-5 p-2 input" type="text" placeholder="Recipe servings (ex : 4)"
                            [(ngModel)]="recipeDetails.servings" name="servings" />
                        <input class="col-md-5 p-2 input" type="text" placeholder="Image url"
                            [(ngModel)]="recipeDetails.image" name="image" />
                        <input class="col-md-5 p-2 input" type="text" placeholder="Recipe Calories Per Servings"
                            [(ngModel)]="recipeDetails.caloriesPerServing" name="calories" />

                        <div class="col-md-5">
                            <label for="cuisine" class="fw-bold">Choose Cuisine Type</label>
                            <select [(ngModel)]="recipeDetails.cuisine" name="cuisine" id="cuisine"
                                class="w-100 p-2 input">
                                @for(cuisine of cuisineArray;track $index){
                                <option [value]="cuisine">{{ cuisine }}</option>
                                }
                            </select>
                        </div>

                        <div class="col-md-5">
                            <label for="difficulty" class="fw-bold">Choose Mode of Cooking</label>
                            <select [(ngModel)]="recipeDetails.difficulty" name="difficulty" id="difficulty"
                                class="w-100 p-2 input">
                                <option value="Easy">Easy</option>
                                <option value="Medium">Medium</option>
                                <option value="Difficult">Difficult</option>
                            </select>
                        </div>

                        <div class="col-md-5">
                            <div class="d-flex gap-2 my-2">
                                <textarea #ingre class="form-control w-100 p-2" placeholder="Add Recipe indrediants"
                                    name="ingredients"></textarea>
                                <button (click)="addIngredient(ingre)" class="btn btn-primary">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="">
                                <div class="d-flex bg-pink flex-wrap gap-2 align-items-center">
                                    @for(ingredient of ingredientsArray;track $index){
                                    <span class="shadow-lg p-2 rounded-3">{{ ingredient }}
                                        <button (click)="deleteIgredient($index)" class="btn btn-danger ms-2"><i
                                                class="fa-solid fa-trash"></i></button>
                                    </span>
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="col-md-5">
                            <div class="d-flex gap-2 my-2">
                                <textarea #instru class="form-control w-100 p-2" type="text"
                                    placeholder="Add Recipe instructions" name="instructions"></textarea>
                                <button (click)="addInstruction(instru)" class="btn btn-primary">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="bg-muted">
                                <div class="d-flex bg-pink flex-wrap gap-2 align-items-center">
                                    @for(instruction of instructionsArray;track $index){
                                    <span class="shadow-lg p-2 rounded-3">{{ instruction }}
                                        <button (click)="deleteInstruction($index)" class="btn btn-danger ms-2">
                                            <i class="fa-solid fa-trash"></i></button>
                                    </span>
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="shadow-lg p-4 mt-2 rounded-3">
                            <h5 class="fw-bold text-center">Choose your meal type</h5>

                            <!-- selected meal type list -->
                            <div class="d-flex flex-wrap gap-2 justify-content-center ">
                                @if (id) {
                                @for(meal of mealTypeArray;track $index){
                                <span class="p-2 span rounded-3 fw-bold">{{ meal }}
                                    <button class="btn" (click)="removeMealType(meal)">
                                        <i class="fa-solid fa-close"></i>
                                    </button>
                                </span>
                                }
                                }
                                @else {
                                @for(meal of mealTypeArray;track $index){
                                <span class="p-2 span rounded-3 fw-bold">{{ meal }}</span>
                                }
                                }
                            </div>

                            <div class="d-flex flex-wrap gap-2">
                                @for (meal of mealArray;track $index){
                                <div
                                    class="d-flex gap-1 justify-content-center align-items-center shadow p-3 rounded-3">
                                    <label [for]="meal">
                                        <input (change)="addMealType($event)" [name]="meal" type="checkbox" />
                                        {{ meal }}
                                    </label>
                                </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center">
                        @if(id){
                        <button (click)="editRecipe()" class="btn btn-success w-75">Update Recipe</button>
                        }
                        @else {
                        <button (click)="addRecipe()" class="btn btn-success w-75">Add Recipe</button>
                        }

                    </div>
                </form>
            </div>
        </div>
    </div>
</div>